{
  "locale": "de",
  "title": {
    "default": "Configurator",
    "de": "Konfigurator"
  },
  "description": {
    "de": "In einfachen Schritten zur Docker-Konfiguration",
    "default": "Docker configuration in simple steps"
  },
  "logoWidth": "100px",
  "logoHeight": "100px",
  "logoPosition": "right",
  "pages": [
    {
      "name": "p_devices",
      "title": {
        "de": "Deine Photovoltaik-Anlage",
        "default": "Your photovoltaic system"
      },
      "elements": [
        {
          "type": "checkbox",
          "name": "devices",
          "title": {
            "de": "Welche Geräte möchtest du mit SOLECTRUS überwachen?",
            "default": "Which devices do you want to monitor with SOLECTRUS?"
          },
          "defaultValue": ["inverter"],
          "isRequired": true,
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "Ein Solarwechselrichter muss beteiligt sein",
                "default": "A solar inverter must be involved"
              },
              "expression": "{devices} contains 'inverter'"
            },
            {
              "type": "expression",
              "text": {
                "de": "Für ein E-Auto wird eine Wallbox benötigt",
                "default": "A wallbox is required for an electric car"
              },
              "expression": "{devices} contains 'wallbox' or {devices} notcontains 'car'"
            }
          ],
          "choices": [
            {
              "value": "inverter",
              "text": {
                "default": "Solar inverter",
                "de": "Solarwechselrichter"
              }
            },
            {
              "value": "battery",
              "text": {
                "de": "Stromspeicher",
                "default": "Battery"
              }
            },
            {
              "value": "wallbox",
              "text": "Wallbox"
            },
            {
              "value": "car",
              "text": {
                "de": "E-Auto",
                "default": "Electric car"
              }
            },
            {
              "value": "heatpump",
              "text": {
                "de": "Wärmepumpe",
                "default": "Heat pump"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "p_battery",
      "title": {
        "de": "Stromspeicher",
        "default": "Battery vendor"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "battery_vendor",
          "visibleIf": "{devices} contains 'battery'",
          "title": {
            "de": "Welchen Stromspeicher hast du?",
            "default": "Which manufacturer is your storage system from?"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "senec3",
              "text": {
                "default": "SENEC.Home V3 or V2.1",
                "de": "SENEC.Home V3 oder v2.1"
              }
            },
            {
              "value": "senec4",
              "text": "SENEC.Home 4"
            },
            {
              "value": "other",
              "text": {
                "de": "Anderer (Messwerte per MQTT)",
                "default": "Other (data via MQTT)"
              }
            }
          ],
          "separateSpecialChoices": true,
          "otherText": {
            "de": "Sonstiges",
            "default": "Other"
          }
        }
      ]
    },
    {
      "name": "p_heatpump",
      "title": {
        "de": "Wärmepumpe",
        "default": "Integration of heat pump"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "heatpump_access",
          "visibleIf": "{devices} contains 'heatpump'",
          "title": {
            "de": "Wie wird der Stromverbrauch der Wärmepumpe gemessen?",
            "default": "How is the electricity consumption of the heat pump measured?"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "shelly",
              "text": {
                "de": "Über einen Shelly Stromzähler",
                "default": "Using Shelly energy monitor"
              }
            },
            {
              "value": "mqtt",
              "text": {
                "de": "Über MQTT",
                "default": "Via MQTT"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "p_wallbox",
      "visibleIf": "{devices} contains 'wallbox' and {battery_vendor} anyof ['senec3', 'senec4']",
      "title": {
        "de": "Wallbox",
        "default": "Vendor Wallbox"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "wallbox_vendor",
          "visibleIf": "{devices} contains 'wallbox'",
          "title": {
            "de": "Von welchem Hersteller ist deine Wallbox?",
            "default": "Which manufacturer is your wallbox from?"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "senec",
              "text": {
                "de": "SENEC (gesteuert vom Stromspeicher)",
                "default": "SENEC (controlled by the battery)"
              },
              "enableIf": "{devices} contains 'battery' and {battery_vendor} anyof ['senec3', 'senec4']"
            },
            {
              "value": "other",
              "text": {
                "default": "Other (data via MQTT)",
                "de": "Anderer (Messwerte per MQTT)"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "p_mode",
      "title": {
        "de": "Betriebsart",
        "default": "Operating mode"
      },
      "description": {
        "de": "Wo genau soll SOLECTRUS laufen?",
        "default": "Where exactly should SOLECTRUS run?"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "installation_type",
          "title": {
            "de": "Wie möchtest du SOLECTRUS betreiben?",
            "default": "How would you like to operate SOLECTRUS?"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "local",
              "text": {
                "de": "Lokal: Alle Komponenten auf einem Raspberry Pi, NAS etc.",
                "default": "Local: All components on a Raspberry, NAS etc."
              }
            },
            {
              "value": "cloud",
              "text": {
                "de": "Cloud: Alle Komponenten auf einem Cloud-Server",
                "default": "Cloud: All components on a cloud server"
              },
              "visibleIf": "{battery_vendor} anyof ['senec4', 'senec3'] and {devices} notcontains 'heatpump' and {wallbox_vendor} <> 'other'"
            },
            {
              "value": "distributed",
              "text": {
                "de": "Verteilt: Messwerterfassung lokal, Server in der Cloud",
                "default": "Distributed: Local measurement, server in the cloud"
              },
              "visibleIf": "{battery_vendor} anyof ['other', 'senec3'] or ({devices} contains 'wallbox' and {wallbox_vendor} != 'senec') or {devices} contains 'heatpump' or {devices} = ['inverter']"
            }
          ]
        }
      ]
    },
    {
      "name": "p_distributed_installation",
      "visibleIf": "{installation_type} = 'distributed'",
      "title": {
        "de": "Verteilte Installation",
        "default": "Distributed installation"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "distributed_choice",
          "title": {
            "de": "Welchen Teil der Installation möchtest du jetzt angehen?",
            "default": "Which part of the installation do you want to tackle now?"
          },
          "description": {
            "de": "Es sind zwei Installationen erforderlich, in der angegebenen Reihenfolge. Welchen Teil erledigen wir jetzt?",
            "default": "Two installations are required, in the order shown.Which part do we do now?"
          },
          "choices": [
            {
              "value": "cloud",
              "text": {
                "de": "1. Die Installation auf dem Cloud-Server",
                "default": "1. The installation on the cloud server"
              }
            },
            {
              "value": "local",
              "text": {
                "de": "2. Die lokale Installation auf Raspberry Pi, NAS etc.",
                "default": "2. The local installation on Raspberry Pi, NAS etc."
              }
            }
          ]
        }
      ]
    },
    {
      "name": "p_machine",
      "visibleIf": "{installation_type} = 'local' or {distributed_choice} = 'local'",
      "title": {
        "de": "Dein Linux-Gerät",
        "default": "Your Linux machine"
      },
      "description": {
        "de": "Der Linux-Host, auf dem die Installation erfolgen soll",
        "default": "The Linux host to be used for installation."
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "linux_machine",
          "visibleIf": "{installation_type} = 'local' or {distributed_choice} = 'local'",
          "title": {
            "de": "Auf welchem Gerät soll die Installation erfolgen?",
            "default": "On which device should the installation take place?"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "raspberry",
              "text": "Raspberry Pi"
            },
            {
              "value": "synology",
              "text": "Synology NAS"
            },
            {
              "value": "other",
              "text": {
                "de": "Anderer Linux-Server (physisch oder virtuell)",
                "default": "Other Linux server (physical or virtual)"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "app_host",
          "visibleIf": "{installation_type} = 'local'",
          "title": {
            "de": "IP-Adresse oder Host name",
            "default": "IP address or host name"
          },
          "isRequired": true,
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "IP-Adresse schon anderweitig benutzt!",
                "default": "IP address already used elsewhere!"
              },
              "expression": "{app_host} != {shelly_host} and {app_host} != {senec_host}"
            }
          ]
        },
        {
          "type": "text",
          "name": "app_port",
          "visibleIf": "{installation_type} = 'local'",
          "title": {
            "de": "Gewünschter Port",
            "default": "Desired port"
          },
          "description": {
            "de": "Normalerweise 3000, bei Konflikten mit anderen Anwendungen auf diesem Gerät kann ein beliebiger anderer, noch freier Port verwendet werden, z.B. 3001.",
            "default": "Default is 3000. Ff there are conflicts with other applications on this device, any other free port can be used, e.g. 3001."
          },
          "defaultValue": "3000",
          "isRequired": true,
          "inputType": "number",
          "min": 1024,
          "max": 65535
        }
      ]
    },
    {
      "name": "p_influxdb_client",
      "visibleIf": "{installation_type} = 'distributed' and {distributed_choice} = 'local'",
      "title": {
        "de": "Zugriff auf InfluxDB",
        "default": "Access to InfluxDB"
      },
      "description": {
        "de": "Wie ist der Cloud-Server aus der ersten Installation erreichbar?",
        "default": "How is the cloud server from the first installation accessible?"
      },
      "elements": [
        {
          "type": "text",
          "name": "influx_host",
          "title": {
            "de": "IP-Adresse oder Hostname des Cloud-Servers",
            "default": "IP address or host name of the cloud server"
          },
          "isRequired": true
        },
        {
          "type": "radiogroup",
          "name": "influx_schema",
          "title": {
            "de": "Protokoll",
            "default": "Protocol"
          },
          "isRequired": true,
          "choices": ["http", "https"]
        }
      ]
    },
    {
      "name": "p_senec3",
      "visibleIf": "{battery_vendor} = 'senec3' and {distributed_choice} <> 'cloud' and {installation_type} <> 'cloud'",
      "title": {
        "de": "Direktzugriff auf SENEC-Stromspeicher",
        "default": "Access to your SENEC battery"
      },
      "elements": [
        {
          "type": "text",
          "name": "senec_host",
          "title": {
            "de": "Lokale IP-Adresse oder Hostname",
            "default": "Local IP address or host name"
          },
          "isRequired": true,
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "IP-Adresse schon anderweitig benutzt!",
                "default": "IP address already used elsewhere!"
              },
              "expression": "{senec_host} != {app_host} and {senec_host} != {shelly_host} and {senec_host} != {mqtt_host} and {senec_host} != {influx_host}"
            }
          ],
          "placeholder": {
            "de": "z.B. 192.168.178.42",
            "default": "e.g. 192.168.178.42"
          }
        },
        {
          "type": "text",
          "name": "senec_interval",
          "title": {
            "de": "Abfrage-Intervall",
            "default": "Query interval"
          },
          "description": {
            "de": "in Sekunden",
            "default": "in seconds"
          },
          "defaultValue": 5,
          "isRequired": true,
          "inputType": "number"
        },
        {
          "type": "radiogroup",
          "name": "senec_schema",
          "title": {
            "de": "Zugriffsprotokoll",
            "default": "Protocol schema"
          },
          "defaultValue": "https",
          "isRequired": true,
          "choices": ["https", "http"]
        },
        {
          "type": "radiogroup",
          "name": "senec_language",
          "title": {
            "de": "Sprache",
            "default": "Language"
          },
          "defaultValue": "de",
          "isRequired": true,
          "choices": [
            {
              "value": "de",
              "text": {
                "de": "Deutsch",
                "default": "German"
              }
            },
            {
              "value": "en",
              "text": {
                "de": "Englisch",
                "default": "English"
              }
            },
            {
              "value": "it",
              "text": {
                "de": "Italienisch",
                "default": "Italian"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "p_senec4",
      "visibleIf": "{battery_vendor} = 'senec4' or {installation_type} = 'cloud' and {battery_vendor} = 'senec3'",
      "title": {
        "de": "Zugangsdaten für SENEC",
        "default": "Credentials for SENEC"
      },
      "elements": [
        {
          "type": "text",
          "name": "senec_username",
          "title": {
            "de": "E-Mail-Adresse",
            "default": "You email address"
          },
          "description": {
            "de": "Das ist die Adresse, mit der du dich bei mein-senec.de bzw. der SENEC-App einloggst",
            "default": "This is the address you use to log in to mein-senec.de or the SENEC app"
          },
          "isRequired": true,
          "inputType": "email",
          "autocomplete": "email"
        },
        {
          "type": "text",
          "name": "senec_password",
          "title": {
            "de": "Dazugehöriges Passwort",
            "default": "Corresponding password"
          },
          "isRequired": true
        },
        {
          "type": "text",
          "name": "senec_totp_uri",
          "title": {
            "de": "URI für Multi-Faktor-Authentisierung",
            "default": "URI for Multi-factor authentication"
          },
          "description": {
            "de": "Nur erforderlich, falls explizit bei SENEC aktiviert. Muss den gesamten String enthalten, beginnend mit \"otpauth://\"",
            "default": "Only required if explicitly enabled in SENEC. Must contain the entire string, starting with \"otpauth://\"."
          },
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "ist ungültig",
                "default": "is invalid"
              },
              "expression": "{senec_totp_uri} contains 'otpauth://' or {senec_totp_uri} empty"
            }
          ]
        },
        {
          "type": "text",
          "name": "senec_system_id",
          "title": {
            "de": "System-ID",
            "default": "System id"
          },
          "description": {
            "de": "Leer lassen, falls nicht bekannt oder du nur einen Speicher hast, der auch noch nie ausgetauscht wurde.",
            "default": "Leave empty if not known or if you only have one battery that has never been replaced."
          }
        },
        {
          "type": "text",
          "name": "senec_interval_cloud",
          "title": {
            "de": "Abfrageintervall",
            "default": "Query interval"
          },
          "description": {
            "de": "in Sekunden",
            "default": "In seconds"
          },
          "defaultValueExpression": "iif({battery_vendor} = 'senec4', 60, 300)",
          "isRequired": true,
          "inputType": "number",
          "minValueExpression": "iif({battery_vendor} = 'senec4', 60, 300)"
        }
      ]
    },
    {
      "name": "p_shelly",
      "visibleIf": "(({heatpump_access} = 'shelly') and ({distributed_choice} != 'cloud')) and ({installation_type} != 'cloud')",
      "title": {
        "de": "Zugriff auf Shelly-Stromzähler",
        "default": "Access to Shelly energy monitor"
      },
      "elements": [
        {
          "type": "text",
          "name": "shelly_host",
          "title": {
            "de": "Lokale IP-Adresse oder Hostname",
            "default": "Local IP address or host name"
          },
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "IP-Adresse schon anderweitig benutzt!",
                "default": "IP address already used elsewhere!"
              },
              "expression": "{shelly_host} != {senec_host} and {shelly_host} != {mqtt_host} and {shelly_host} != {app_host}"
            }
          ],
          "placeholder": {
            "de": "z.B. 192.168.178.43",
            "default": "e.g. 192.168.178.43"
          }
        },
        {
          "type": "text",
          "name": "shelly_interval",
          "title": {
            "de": "Abfrage-Intervall",
            "default": "Query interval"
          },
          "defaultValue": 5,
          "inputType": "number"
        }
      ]
    },
    {
      "name": "p_mqtt",
      "visibleIf": "({battery_vendor} = 'other' or ({devices} contains 'wallbox' and {wallbox_vendor} != 'senec') or {heatpump_access} = 'mqtt' or {devices} = ['inverter'] or {devices} contains 'car') and ({installation_type} = 'local' or {distributed_choice} = 'local')",
      "title": {
        "de": "Zugriff auf MQTT-Broker",
        "default": "Access to MQTT broker"
      },
      "description": {
        "de": "Aufgrund deiner Vorauswahl wird ein externer MQTT-Broker (z.B. ioBroker) benötigt, dessen Installation und Konfiguration hier nicht behandelt wird. Gib die Zugangsdaten zu diesem Server an.",
        "default": "Based on your preselection, an external MQTT broker (e.g. ioBroker) is required, but its installation and configuration is not covered here. Enter the credentials for this server."
      },
      "elements": [
        {
          "type": "text",
          "name": "mqtt_host",
          "title": {
            "de": "Lokale IP-Adresse oder Hostname",
            "default": "Local IP address or host name"
          },
          "isRequired": true,
          "validators": [
            {
              "type": "expression",
              "text": {
                "de": "IP-Adresse schon anderweitig benutzt!",
                "default": "IP address already used elsewhere!"
              },
              "expression": "{mqtt_host} != {senec_host} and {mqtt_host} != {shelly_host}"
            }
          ],
          "placeholder": {
            "de": "z.B. 192.168.178.44",
            "default": "e.g. 192.168.178.44"
          }
        },
        {
          "type": "text",
          "name": "mqtt_port",
          "title": "Port",
          "defaultValue": 1883,
          "isRequired": true,
          "inputType": "number"
        },
        {
          "type": "boolean",
          "name": "mqtt_ssl",
          "title": "SSL",
          "defaultValue": "false",
          "isRequired": true
        },
        {
          "type": "text",
          "name": "mqtt_username",
          "title": {
            "de": "Benutzername (optional)",
            "default": "Username (optional)"
          }
        },
        {
          "type": "text",
          "name": "mqtt_password",
          "title": {
            "de": "Passwort (optional)",
            "default": "Password (optional)"
          }
        }
      ]
    },
    {
      "name": "p_mqtt_topics",
      "visibleIf": "({battery_vendor} = 'other' or ({devices} contains 'wallbox' and {wallbox_vendor} != 'senec') or {heatpump_access} = 'mqtt' or {devices} = ['inverter'] or {devices} contains 'car') and ({installation_type} = 'local' or {distributed_choice} = 'local')",
      "title": {
        "default": "MQTT topics",
        "de": "MQTT-Topics"
      },
      "description": {
        "de": "Lege nun jeweils fest, über welches Topic ein Messwert gefunden werden kann.",
        "default": "Now specify which topic to use to find a measured value."
      },
      "elements": [
        {
          "type": "text",
          "name": "mqtt_inverter_power",
          "visibleIf": "{devices} contains 'inverter' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Erzeugung",
            "default": "Inverter power"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/inverter/power",
            "de": "z.B. myhome/inverter/power"
          }
        },
        {
          "type": "text",
          "name": "mqtt_house_power",
          "visibleIf": "{battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Hausverbrauch",
            "default": "House power"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/energy/house_power",
            "de": "z.B. myhome/energy/house_power"
          }
        },
        {
          "type": "text",
          "name": "mqtt_grid_power",
          "visibleIf": "{battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Netzbezug / -einspeisung",
            "default": "Grid power import"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/grid/power",
            "de": "z.B. myhome/grid/power"
          }
        },
        {
          "type": "radiogroup",
          "name": "mqtt_grid_power_pos_neg",
          "visibleIf": "{battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Netz: Vorzeichenbehandlung",
            "default": "Grid: Sign handling"
          },
          "requiredIf": "{mqtt_grid_power} notempty",
          "choices": [
            {
              "value": "pos_neg",
              "text": {
                "de": "Positiv ist Netzbezug , Negativ ist Einspeisung",
                "default": "Positive is grid import, negative is export"
              }
            },
            {
              "value": "neg_pos",
              "text": {
                "de": "Positiv ist Einspeisung , Negativ ist Netzbezug",
                "default": "Positive is grid export, negative is import"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "mqtt_grid_export_limit",
          "visibleIf": "{devices} contains 'inverter' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Einspeisebegrenzung",
            "default": "Grid export limit"
          },
          "description": "in %",
          "placeholder": {
            "default": "e.g. myhome/grid/power_ratio",
            "de": "z.B. myhome/grid/power_ratio"
          }
        },
        {
          "type": "text",
          "name": "mqtt_battery_power",
          "visibleIf": "{devices} contains 'battery' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Batterie: Beladung / -entladung",
            "default": "Battery charging power"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/battery/0/power",
            "de": "z.B. myhome/battery/0/power"
          }
        },
        {
          "type": "radiogroup",
          "name": "mqtt_battery_power_pos_neg",
          "visibleIf": "{devices} contains 'battery' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Batterie: Vorzeichenbehandlung",
            "default": "Battery: Sign handling"
          },
          "requiredIf": "{mqtt_battery_power} notempty",
          "choices": [
            {
              "value": "pos_neg",
              "text": {
                "de": "Positiv ist Beladung , Negativ ist Entladung",
                "default": "Positive is charging, negative is discharging"
              }
            },
            {
              "value": "neg_pos",
              "text": {
                "de": "Positiv ist Entladung , Negativ ist Beladung",
                "default": "Positive is discharging, negative is charging"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "mqtt_battery_soc",
          "visibleIf": "{devices} contains 'battery' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Batterie-Ladestand",
            "default": "Battery SOC"
          },
          "description": "in %",
          "placeholder": {
            "default": "e.g. myhome/battery/0/soc",
            "de": "z.B. myhome/battery/0/soc"
          }
        },
        {
          "type": "text",
          "name": "mqtt_case_temp",
          "visibleIf": "{devices} contains 'inverter' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Geräte- oder Gehäusetemperatur",
            "default": "Case temperatur"
          },
          "description": "in °C",
          "placeholder": {
            "default": "e.g. myhome/inverter/case_temp",
            "de": "z.B. myhome/inverter/case_temp"
          }
        },
        {
          "type": "text",
          "name": "mqtt_wallbox_power",
          "visibleIf": "{devices} contains 'wallbox' and {wallbox_vendor} != 'senec'",
          "title": {
            "de": "Wallbox",
            "default": "Wallbox power"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/wallbox/0/power",
            "de": "z.B. myhome/wallbox/0/power"
          }
        },
        {
          "type": "radiogroup",
          "name": "wallbox_exclude_from_house_power",
          "visibleIf": "{devices} contains 'wallbox' and {wallbox_vendor} != 'senec'",
          "title": {
            "de": "Wallbox im Hausverbrauch enthalten?",
            "default": "Wallbox included in household consumption?"
          },
          "choices": [
            {
              "value": "yes",
              "text": {
                "de": "Der Verbrauch der Wallbox ist im Hausverbrauch enthalten und soll herausgerechnet werden",
                "default": "The consumption of the wallbox is included in the house consumption and should be excluded"
              }
            },
            {
              "value": "no",
              "text": {
                "de": "Der Verbrauch der Wallbox ist nicht im Hausverbrauch enthalten",
                "default": "The consumption of the wallbox is not included in the household consumption"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "mqtt_wallbox_car_connected",
          "visibleIf": "{devices} contains 'wallbox' and {wallbox_vendor} != 'senec'",
          "title": {
            "de": "Wallbox: Auto verbunden",
            "default": "Wallbox: Car connected"
          },
          "description": {
            "default": "True/False, 0/1, \"Yes\"/\"No\" or \"True\"/\"False\"",
            "de": "True/False, 0/1, \"Yes\"/\"No\" oder \"True\"/\"False\""
          },
          "placeholder": {
            "default": "e.g. myhome/wallbox/0/car_connected",
            "de": "z.B. myhome/wallbox/0/car_connected"
          }
        },
        {
          "type": "text",
          "name": "mqtt_car_battery_soc",
          "visibleIf": "{devices} contains 'car'",
          "title": {
            "de": "E-Auto: Batterie-Ladestand",
            "default": "Car battery SOC"
          },
          "description": "in %",
          "placeholder": {
            "default": "e.g. mycar/battery/0/soc",
            "de": "z.B. mycar/battery/0/soc"
          }
        },
        {
          "type": "text",
          "name": "mqtt_heatpump_power",
          "visibleIf": "{devices} contains 'heatpump' and {heatpump_access} = 'mqtt'",
          "title": {
            "de": "Wärmepumpe",
            "default": "Heatpump"
          },
          "description": "in Watt",
          "placeholder": {
            "default": "e.g. myhome/heatpump/power",
            "de": "z.B. myhome/heatpump/power"
          }
        },
        {
          "type": "radiogroup",
          "name": "heatpump_exclude_from_house_power",
          "visibleIf": "{devices} contains 'heatpump' and {heatpump_access} = 'mqtt'",
          "title": {
            "de": "Wärmepumpe im Hausverbrauch enthalten?",
            "default": "Heat pump included in household consumption?"
          },
          "choices": [
            {
              "value": "yes",
              "text": {
                "de": "Der Verbrauch der Wärmepumpe ist im Hausverbrauch enthalten und soll herausgerechnet werden",
                "default": "The consumption of the heat pump is included in the house consumption and should be excluded"
              }
            },
            {
              "value": "no",
              "text": {
                "de": "Der Verbrauch der Wärmepumpe ist nicht im Hausverbrauch enthalten",
                "default": "The consumption of the heat pump is not included in the house consumption"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "mqtt_system_status",
          "visibleIf": "{devices} contains 'inverter' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Systemstatus",
            "default": "System status"
          },
          "description": {
            "de": "als Text",
            "default": "as Text"
          },
          "placeholder": {
            "default": "e.g. myhome/inverter/system_state",
            "de": "z.B. myhome/inverter/system_state"
          }
        },
        {
          "type": "text",
          "name": "mqtt_system_status_ok",
          "visibleIf": "{devices} contains 'inverter' and {battery_vendor} <> 'senec3' and {battery_vendor} <> 'senec4'",
          "title": {
            "de": "Systemstatus ist OK",
            "default": "System status is ok"
          },
          "description": {
            "de": "als Boolscher Wert (Ja/Nein)",
            "default": "as Boolean"
          },
          "placeholder": {
            "default": "e.g. myhome/inverter/system_state_ok",
            "de": "z.B. myhome/inverter/system_state_ok"
          }
        }
      ]
    },
    {
      "name": "p_forecast",
      "visibleIf": "{devices} contains 'inverter'",
      "title": {
        "de": "Ertragsvorhersage",
        "default": "Yield forecast"
      },
      "elements": [
        {
          "type": "radiogroup",
          "name": "forecast",
          "visibleIf": "{distributed_choice} <> 'local'",
          "title": {
            "de": "Möchtest du eine Prognose des PV-Ertrages?",
            "default": "Would you like a forecast of the PV yield?"
          },
          "description": {
            "de": "Die Prognose erfolgt kostenfrei individuell für deinen Standort",
            "default": "The forecast is provided free of charge for your location"
          },
          "isRequired": true,
          "choices": [
            {
              "value": "forecast_forecast_solar",
              "text": {
                "de": "Ja, mit forecast.solar",
                "default": "Yes, with forecast.solar"
              }
            },
            {
              "value": "forecast_solcast",
              "text": {
                "de": "Ja, mit solcast.com",
                "default": "Yes, with solcast.com"
              }
            },
            {
              "value": "forecast_none",
              "text": {
                "de": "Nein",
                "default": "No"
              }
            }
          ]
        },
        {
          "type": "text",
          "name": "forecast_latitude",
          "visibleIf": "{forecast} = 'forecast_forecast_solar'",
          "title": {
            "default": "Latitude",
            "de": "Breitengrad"
          },
          "description": {
            "de": "-90 (Süd) bis 90 (Nord)",
            "default": "-90 (South) to 90 (North)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -90,
          "max": 90
        },
        {
          "type": "text",
          "name": "forecast_longitude",
          "visibleIf": "{forecast} = 'forecast_forecast_solar'",
          "title": {
            "default": "Longitude",
            "de": "Längengrad"
          },
          "description": {
            "de": "-180 (West) bis 180 (Ost)",
            "default": "-180 (West) to 180 (East)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -180,
          "max": 180
        },
        {
          "type": "radiogroup",
          "name": "forecast_roofs",
          "visibleIf": "{forecast} anyof ['forecast_forecast_solar', 'forecast_solcast']",
          "title": {
            "de": "Wieviele Flächen mit Solarmodulen gibt es bei dir?",
            "default": "How many planes do you have with solar modules?"
          },
          "isRequired": true,
          "choices": [
            "1",
            "2",
            {
              "value": "3",
              "visibleIf": "{forecast} = 'forecast_forecast_solar'"
            },
            {
              "value": "4",
              "visibleIf": "{forecast} = 'forecast_forecast_solar'"
            }
          ]
        }
      ]
    },
    {
      "name": "p_forecast_forecast_solar",
      "visibleIf": "{forecast} = 'forecast_forecast_solar'",
      "title": {
        "default": "Yield forecast from forecast.solar",
        "de": "Ertragsvorhersage von forecast.solar"
      },
      "description": {
        "de": "Einstellungen für jede einzelne Dachfläche",
        "default": "Settings for each individual roof surface"
      },
      "elements": [
        {
          "type": "text",
          "name": "forecast_azimuth1",
          "visibleIf": "{forecast_roofs} anyof [1, 2, 3, 4]",
          "title": {
            "default": "1. Roof: Azimuth",
            "de": "1. Dachfläche: Ausrichtung"
          },
          "description": {
            "de": "-180 … 180 (-180 = Nord, -90 = Ost, 0 = Süd, 90 = West, 180 = Nord)",
            "default": "-180 ... 180 (-180 = north, -90 = east, 0 = south, 90 = west, 180 = north)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -180,
          "max": 180
        },
        {
          "type": "text",
          "name": "forecast_declination1",
          "visibleIf": "{forecast_roofs} anyof [1, 2, 3, 4]",
          "title": {
            "de": "1. Dachfläche: Dachneigung",
            "default": "1. Roof: Declination"
          },
          "description": {
            "de": "0 (horizontal) bis 90 (Vertikal)",
            "default": "0 (horizontal) to 90 (vertical)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": 0,
          "max": 90
        },
        {
          "type": "text",
          "name": "forecast_kwp1",
          "visibleIf": "{forecast_roofs} anyof [1, 2, 3, 4]",
          "title": {
            "de": "1. Dachfläche: Maximal-Leistung",
            "default": "1. Roof: Maximum power"
          },
          "description": "in kWp",
          "isRequired": true,
          "inputType": "number",
          "min": 0
        },
        {
          "type": "text",
          "name": "forecast_azimuth2",
          "visibleIf": "{forecast_roofs} anyof [2, 3, 4]",
          "title": {
            "default": "2. Roof: Azimuth",
            "de": "2. Dachfläche: Ausrichtung"
          },
          "description": {
            "de": "-180 … 180 (-180 = Nord, -90 = Ost, 0 = Süd, 90 = West, 180 = Nord)",
            "default": "-180 ... 180 (-180 = north, -90 = east, 0 = south, 90 = west, 180 = north)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -180,
          "max": 180
        },
        {
          "type": "text",
          "name": "forecast_declination2",
          "visibleIf": "{forecast_roofs} anyof [2, 3, 4]",
          "title": {
            "de": "2. Dachfläche: Dachneigung",
            "default": "2. Roof: Declination"
          },
          "description": {
            "de": "0 (horizontal) bis 90 (Vertikal)",
            "default": "0 (horizontal) to 90 (vertical)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": 0,
          "max": 90
        },
        {
          "type": "text",
          "name": "forecast_kwp2",
          "visibleIf": "{forecast_roofs} anyof [2, 3, 4]",
          "title": {
            "de": "2. Dachfläche: Maximal-Leistung",
            "default": "2. Roof: Maximum power"
          },
          "description": "in kWp",
          "isRequired": true,
          "inputType": "number",
          "min": 0
        },
        {
          "type": "text",
          "name": "forecast_azimuth3",
          "visibleIf": "{forecast_roofs} anyof [3, 4]",
          "title": {
            "default": "3. Roof: Azimuth",
            "de": "3. Dachfläche: Ausrichtung"
          },
          "description": {
            "de": "-180 … 180 (-180 = Nord, -90 = Ost, 0 = Süd, 90 = West, 180 = Nord)",
            "default": "-180 ... 180 (-180 = north, -90 = east, 0 = south, 90 = west, 180 = north)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -180,
          "max": 180
        },
        {
          "type": "text",
          "name": "forecast_declination3",
          "visibleIf": "{forecast_roofs} anyof [3, 4]",
          "title": {
            "de": "3. Dachfläche: Dachneigung",
            "default": "3. Roof: Declination"
          },
          "description": {
            "de": "0 (horizontal) bis 90 (Vertikal)",
            "default": "0 (horizontal) to 90 (vertical)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": 0,
          "max": 90
        },
        {
          "type": "text",
          "name": "forecast_kwp3",
          "visibleIf": "{forecast_roofs} anyof [3, 4]",
          "title": {
            "de": "3. Dachfläche: Maximal-Leistung",
            "default": "3. Roof: Maximum power"
          },
          "description": "in kWp",
          "isRequired": true,
          "inputType": "number",
          "min": 0
        },
        {
          "type": "text",
          "name": "forecast_azimuth4",
          "visibleIf": "{forecast_roofs} anyof [4]",
          "title": {
            "default": "4.Roof: Azimuth",
            "de": "4. Dachfläche: Ausrichtung"
          },
          "description": {
            "de": "-180 … 180 (-180 = Nord, -90 = Ost, 0 = Süd, 90 = West, 180 = Nord)",
            "default": "-180 ... 180 (-180 = north, -90 = east, 0 = south, 90 = west, 180 = north)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": -180,
          "max": 180
        },
        {
          "type": "text",
          "name": "forecast_declination4",
          "visibleIf": "{forecast_roofs} anyof [4]",
          "title": {
            "de": "4. Dachfläche: Dachneigung",
            "default": "4. Roof: Declination"
          },
          "description": {
            "de": "0 (horizontal) bis 90 (Vertikal)",
            "default": "0 (horizontal) to 90 (vertical)"
          },
          "isRequired": true,
          "inputType": "number",
          "min": 0,
          "max": 90
        },
        {
          "type": "text",
          "name": "forecast_kwp4",
          "visibleIf": "{forecast_roofs} anyof [4]",
          "title": {
            "de": "4. Dachfläche: Maximal-Leistung",
            "default": "4. Roof: Maximum power"
          },
          "description": "in kWp",
          "isRequired": true,
          "inputType": "number",
          "min": 0
        }
      ]
    },
    {
      "name": "p_forecast_solcast",
      "visibleIf": "{forecast} = 'forecast_solcast'",
      "title": {
        "default": "Yield forecast from Solcast",
        "de": "Ertragsvorhersage von Solcast"
      },
      "description": {
        "de": "API-Zugriff",
        "default": "API access"
      },
      "elements": [
        {
          "type": "text",
          "name": "forecast_solcast_api_key",
          "title": {
            "de": "API-Key bei Solcast",
            "default": "API key at Solcast"
          },
          "description": {
            "de": "Kostenfrei besorgen bei https://toolkit.solcast.com.au/",
            "default": "Get it for free at https://toolkit.solcast.com.au/"
          },
          "isRequired": true
        },
        {
          "type": "text",
          "name": "forecast_solcast_id1",
          "visibleIf": "{forecast_roofs} anyof [1, 2, 3, 4]",
          "title": {
            "default": "ID of the 1st roof",
            "de": "ID der 1. Dachfläche "
          },
          "description": {
            "default": "Resource ID at Solcast",
            "de": "Resourcen-ID bei Solcast"
          },
          "isRequired": true,
          "maskType": "pattern",
          "maskSettings": {
            "saveMaskedValue": true,
            "pattern": "####-####-####-####"
          }
        },
        {
          "type": "text",
          "name": "forecast_solcast_id2",
          "visibleIf": "{forecast_roofs} anyof [2, 3, 4]",
          "title": {
            "default": "ID of the 2nd roof area ",
            "de": "ID der 2. Dachfläche "
          },
          "description": {
            "default": "Resource ID at Solcast",
            "de": "Resourcen-ID bei Solcast"
          },
          "isRequired": true,
          "validators": [
            {
              "type": "expression"
            }
          ],
          "maskType": "pattern",
          "maskSettings": {
            "saveMaskedValue": true,
            "pattern": "####-####-####-####"
          }
        }
      ]
    },
    {
      "name": "p_backup",
      "title": {
        "de": "Backup auf Amazon S3",
        "default": "Backup to Amazon S3"
      },
      "elements": [
        {
          "type": "boolean",
          "name": "backup",
          "visibleIf": "{distributed_choice} <> 'local'",
          "title": {
            "de": "Hast du einen Account bei AWS und möchtest die Datenbanken automatisch dorthin sichern?",
            "default": "Do you have an account at AWS and want to back up the databases there automatically?"
          },
          "isRequired": true
        },
        {
          "type": "text",
          "name": "aws_access_key_id",
          "visibleIf": "{backup} = true",
          "title": "Access Key ID",
          "isRequired": true
        },
        {
          "type": "text",
          "name": "aws_secret_access_key",
          "visibleIf": "{backup} = true",
          "title": "Secret Access Key",
          "isRequired": true
        },
        {
          "type": "text",
          "name": "aws_region",
          "visibleIf": "{backup} = true",
          "title": "Region",
          "isRequired": true
        },
        {
          "type": "text",
          "name": "aws_bucket",
          "visibleIf": "{backup} = true",
          "title": "Bucket",
          "isRequired": true
        }
      ]
    },
    {
      "name": "p_traefik",
      "visibleIf": "{installation_type} = 'cloud' or {distributed_choice} = 'cloud'",
      "title": {
        "de": "Domain mit https",
        "default": "Domain with https"
      },
      "elements": [
        {
          "type": "boolean",
          "name": "traefik",
          "title": {
            "de": "Möchtest du eine eigene Domain oder Subdomain nutzen?",
            "default": "Do you have your own domain or subdomain?"
          },
          "description": {
            "de": "Dies ermöglicht die Nutzung von https und Let’s Encrypt-Zertifikat",
            "default": "This enables encryption with https and Let's Encrypt certificate"
          },
          "isRequired": true
        },
        {
          "type": "text",
          "name": "app_domain",
          "visibleIf": "{traefik} = true",
          "title": {
            "de": "Wie lautet deine Domain oder Subdomain?",
            "default": "What is your domain or subdomain?"
          },
          "description": {
            "de": "Beispiele: meine-domain.de oder solectrus.meine-domain.de",
            "default": "Examples: my-domain.com or solectrus.my-domain.com"
          },
          "isRequired": true
        }
      ]
    },
    {
      "name": "p_dashboard",
      "visibleIf": "{installation_type} anyof ['local', 'cloud'] or {distributed_choice} = 'cloud'",
      "title": "Dashboard",
      "elements": [
        {
          "type": "text",
          "name": "installation_date",
          "title": {
            "de": "Inbetriebnahme deiner PV-Anlage",
            "default": "Commissioning of your PV system"
          },
          "description": {
            "de": "Datum der Installation, wird für die Auswahl von Zeiträumen benötigt",
            "default": "Date of installation"
          },
          "isRequired": true,
          "inputType": "date",
          "maxValueExpression": "today()"
        },
        {
          "type": "text",
          "name": "admin_password",
          "title": {
            "de": "Administrator-Passwort",
            "default": "Administrator password"
          },
          "description": {
            "de": "Nur der Admin kann Einstellungen und Strompreise bearbeiten",
            "default": "Only the admin can edit settings and electricity prices"
          },
          "isRequired": true
        }
      ]
    }
  ],
  "showCompletePage": false,
  "questionErrorLocation": "bottom"
}
