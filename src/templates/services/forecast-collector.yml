image: ghcr.io/solectrus/forecast-collector:latest
labels:
  - 'com.centurylinklabs.watchtower.scope=solectrus'
depends_on:
  influxdb:
    condition: service_healthy
links:
  - influxdb
environment:
  - INFLUX_HOST
  - INFLUX_TOKEN=${INFLUX_TOKEN_WRITE}
  - INFLUX_ORG
  - INFLUX_BUCKET
  - INFLUX_MEASUREMENT=${INFLUX_MEASUREMENT_FORECAST}
  - FORECAST_LATITUDE
  - FORECAST_LONGITUDE
  - FORECAST_DECLINATION
  - FORECAST_AZIMUTH
  - FORECAST_KWP
  - FORECAST_CONFIGURATIONS
  - FORECAST_0_LATITUDE
  - FORECAST_0_LONGITUDE
  - FORECAST_0_DECLINATION
  - FORECAST_0_AZIMUTH
  - FORECAST_0_KWP
  - FORECAST_0_DAMPING_MORNING
  - FORECAST_0_DAMPING_EVENING
  - FORECAST_1_LATITUDE
  - FORECAST_1_LONGITUDE
  - FORECAST_1_DECLINATION
  - FORECAST_1_AZIMUTH
  - FORECAST_1_KWP
  - FORECAST_1_DAMPING_MORNING
  - FORECAST_1_DAMPING_EVENING
  - FORECAST_2_LATITUDE
  - FORECAST_2_LONGITUDE
  - FORECAST_2_DECLINATION
  - FORECAST_2_AZIMUTH
  - FORECAST_2_KWP
  - FORECAST_2_DAMPING_MORNING
  - FORECAST_2_DAMPING_EVENING
  - FORECAST_3_LATITUDE
  - FORECAST_3_LONGITUDE
  - FORECAST_3_DECLINATION
  - FORECAST_3_AZIMUTH
  - FORECAST_3_KWP
  - FORECAST_3_DAMPING_MORNING
  - FORECAST_3_DAMPING_EVENING
  - FORECAST_INTERVAL
  - FORECAST_SOLAR_APIKEY
restart: always
logging:
  options:
    max-size: '10m'
    max-file: '3'
